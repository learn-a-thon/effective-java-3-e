# item 21. 인터페이스는 구현하는 쪽을 생각해 설계해라

1. 기존 인터페이스에 디폴트 메서드 구현을 추가하는 것은 위험한 일이다.
- 디폴트 메서드는 모든 구현 클래스에 대해 아무것도 모른 채 합의 없이 무작정 "삽입" 될 뿐이다.
- 디폴트 메서드는 기존 구현체에 런타임 오류를 일으킬 수 있다.
- Collection에 있는 removeIf 디폴트 메서드가 예시이다.
  - Synchronized Collection에게는 위험한 기능, 동기화를 통해서 멀티 쓰레드 환경에서 오직 하나의 쓰레드만 해당 기능을 수행해야 하는데, removeIf는 동기화 기능이 없기 때문에 안전하지 않음
  - 누군가가 Synchronized Collection에서 removeIf를 호출하면 ConcurrentModificationException이 발생한다.
1. 인터페이스를 설계할 때는 세심한 주의를 기울여야 한다.
- 서로 다른 방식으로 최소한 세 가지는 구현을 해보자.


#### ConcurrentModificationException
- 현재 바뀌면 안되는 것을 수정할 때 발생하는 예외 (컬렉션을 Iterator로 순회하다가 Element를 삭제하려고 할 때 보통 발생)
    - 한 스레드가 컬렉션을 바라보는 도중에 다른 스레드가 컬렉션의 Element를 수정 한다면 이럴 경우엔 예측할 수 없는 결과가 나타날수도 있기 때문에 예외를 던지게 된다.
    - 싱글 스레드에서도 Iterator를 통해 컬렉션을 순회하는 도중에 변경이 발생한다면 이 예외는 발생할 수 있음!